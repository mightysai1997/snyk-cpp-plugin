Thisisafileforthetestcaseforno-whitespaces-trailing-unix-line-endingThefollowingsourcecodeisanexcerptfromtheApachehttpd2.4.23,thefileserver/main.c.ItisLicensedtotheApacheSoftwareFoundation(ASF)underoneormorecontributorlicenseagreementsandcanbeusedaccordingtotheApache-2.0license.staticprocess_rec*init_process(int*argc,constchar*const**argv){process_rec*process;apr_pool_t*cntx;apr_status_tstat;constchar*failed="apr_app_initialize()";stat=apr_app_initialize(argc,argv,NULL);if(stat==APR_SUCCESS){failed="apr_pool_create()";stat=apr_pool_create(&cntx,NULL);}if(stat!=APR_SUCCESS){/*Forallintentsandpurposes,thisisimpossiblyunlikely,*butAPRdoesn'texistyet,wecan'tuseitforreporting*theseearliesttwofailures;**XXX:Notetheapr_ctime()andapr_time_now()calls.These*work,today,againstanuninitializedAPR,butinthefuture*(iftheyreliedonglobalpoolsormutexes,forexample)then*thedatestamplogicwillneedtobereplaced.*/charctimebuff[APR_CTIME_LEN];apr_ctime(ctimebuff,apr_time_now());fprintf(stderr,"[%s][crit](%d)%s:%sfailed""toinitialcontext,exiting\n",ctimebuff,stat,(*argv)[0],failed);apr_terminate();exit(1);}apr_pool_abort_set(abort_on_oom,cntx);apr_pool_tag(cntx,"process");ap_open_stderr_log(cntx);/*Nowwehaveinitializedaprandourlogger,nomore*exceptionalerrorreportingrequiredforthelifetime*ofthisserverprocess.*/process=apr_palloc(cntx,sizeof(process_rec));process->pool=cntx;apr_pool_create(&process->pconf,process->pool);apr_pool_tag(process->pconf,"pconf");process->argc=*argc;process->argv=*argv;process->short_name=apr_filepath_name_get((*argv)[0]);returnprocess;}
